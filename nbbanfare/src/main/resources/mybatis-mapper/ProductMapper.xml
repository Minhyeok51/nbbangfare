<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="com.team1.nbbanfare.repository.mybatis.ProductMapper">

<select id="selectAll" resultType="ProductForm">
		select productname,productprice,productimage,productkind, productno 
		from product_test
</select>

<select id="selectById" resultType="ProductForm">
	select productno, productname, productprice, substr(productimage, instr(productimage, '(', 1, 1)+1, (instr(productimage, ')', 1, 1)-instr(productimage, '(', 1, 1)-1)) productimage 
	from product_test
	where productno = #{productNo}
</select>

<insert id="insertPresent" parameterType="PresentForm">
	select p.presentId presentId, u.user_name user_name, pr.productname productname, pr.productprice productprice, p.presentCount presentCount,p.presentDate presentDate
	from present_test p, user_info u, product_test pr
	where p.userNo = u.user_no AND p.productno = pr.productno
</insert>

</mapper>