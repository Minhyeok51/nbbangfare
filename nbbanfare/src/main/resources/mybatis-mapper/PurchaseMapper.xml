<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="com.team1.nbbanfare.repository.mybatis.PurchaseMapper">
	<insert id="insertPurchase" parameterType="PurchaseForm">
		insert into purchase_test(purchaseno, productno, user_id)
		values(purchasePK.nextval, #{productNo}, #{userId})
	</insert>
	
	<select id="selectByPurchase" resultType="PurchaseForm">
		select pu.purchaseno purchaseno, pr.productname productname, p.presentcount presentcount, pr.productprice productprice, TO_CHAR(pu.purchasedate, 'YYYY-MM-DD') purchasedate  
		from purchase_test pu, product_test pr, present_test p
		where pu.productno = pr.productno and pu.presentno = p.presentid and userno = #{userId}
	</select>
</mapper>